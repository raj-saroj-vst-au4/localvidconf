# =============================================================================
# Confera - Environment Variables
# Copy this file to .env and fill in your values
# NEVER commit the .env file to version control
# =============================================================================

# --- Database (MySQL on the host machine) ---
# Containers use host network mode and connect to MySQL on localhost.
DATABASE_URL="mysql://meetuser:your_db_password_here@localhost:3306/confera"

# --- NextAuth ---
# MUST be the full public URL including the /meet basePath.
# Use your public server's domain, not the internal server's IP.
# Example (HTTP):  http://yourdomain.com/meet
# Example (HTTPS): https://yourdomain.com/meet
NEXTAUTH_URL=https://yourdomain.com/meet
NEXTAUTH_SECRET=generate_with_openssl_rand_base64_32

# --- Google OAuth (optional) ---
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret

# --- Media Server ---
# MEDIASOUP_LISTEN_IP: always 0.0.0.0 (listen on all interfaces)
MEDIASOUP_LISTEN_IP=0.0.0.0

# MEDIASOUP_ANNOUNCED_IP: the IP that WebRTC clients will try to connect to
# for direct media (UDP ports 40000-40100). This must be reachable by clients.
#
# Scenarios:
#   a) Internal-only clients (same LAN): use the internal server's LAN IP
#      MEDIASOUP_ANNOUNCED_IP=10.127.1.23
#
#   b) Internet clients using TURN relay: use the same internal LAN IP, then
#      also set allowed-peer-ip in coturn/turnserver.conf to match this value.
#      The TURN server (coturn) must itself be reachable from the internet --
#      see TURN_SERVER_URL below.
#
#   c) Public IP on internal server: use that public IP directly.
MEDIASOUP_ANNOUNCED_IP=10.127.1.23

# --- TURN/STUN (Coturn) ---
# TURN_SERVER_URL must be reachable by clients in their browser.
# If coturn is on the internal server behind NAT, internet clients cannot
# reach it -- the TURN UDP port (3478) must be forwarded from your public
# server/router to the internal server at the network level (iptables/firewall),
# as nginx cannot proxy UDP.
#
# Example (internal LAN only):  turn:10.127.1.23:3478
# Example (public IP/domain):   turn:yourdomain.com:3478
TURN_SERVER_URL=turn:yourdomain.com:3478
TURN_SERVER_USERNAME=meetuser
TURN_SERVER_PASSWORD=your_turn_password_here
TURN_SECRET=your_turn_shared_secret_here

# --- Email (SMTP for reminders & invites) ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM="Confera <noreply@yourdomain.com>"

# --- App Config ---
NODE_ENV=production

# CORS_ORIGIN: the public domain from which browsers load the app.
# Must match the public server's domain (no trailing slash, no path).
# Example (HTTP):  http://yourdomain.com
# Example (HTTPS): https://yourdomain.com
CORS_ORIGIN=https://yourdomain.com

LOG_LEVEL=info
